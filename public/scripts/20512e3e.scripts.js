function showAlert(a,b,c,d){a.title=c,a.message=d;var e=b.open({html:!0,templateUrl:"modalMessage.html"});a.close=function(){e.close("")}}var app=angular.module("timeTrackerApp.services",[]);app.service("TimeRecord",["$resource",function(a){return a("/api/time_records/:id.json",{id:"@id"},{update:{method:"PUT"},current_record:{method:"GET",url:"/api/time_records/current",isArray:!1}})}]);var app=angular.module("timeTrackerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ng-token-auth","ui.bootstrap","ui.bootstrap.datetimepicker","timeTrackerApp.controllers"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/sign_in",{templateUrl:"views/user_sessions/new.html",controller:"UserSessionsCtrl"}).when("/sign_up",{templateUrl:"views/user_registrations/new.html",controller:"UserRegistrationsCtrl"}).when("/reset_password",{templateUrl:"views/user_registrations/reset.html",controller:"UserRegistrationsCtrl"}).otherwise({redirectTo:"/"})}]).config(["$authProvider",function(a){a.configure({confirmationSuccessUrl:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),authProviderPaths:{twitter:"/auth/twitter",facebook:"/auth/facebook",linkedin:"/auth/linkedin",google:"/auth/google"}})}]),app.run(["$rootScope","$location","$modal",function(a,b,c){a.$on("auth:login-success",function(d,e){b.path("/"),showAlert(a,c,"Success","Welcome back "+e.email)}),a.$on("auth:login-error",function(b,d){showAlert(a,c,"Failure","Authentication failure: "+d.errors[0])}),a.$on("auth:logout-success",function(d){b.path("/signin"),showAlert(a,c,"Success","See you soon!")}),a.$on("auth:logout-error",function(b,d){showAlert(a,c,"Failure","Signout failure: "+d.errors[0])}),a.$on("auth:registration-email-success",function(b,d){showAlert(a,c,"Success","A registration email was sent to "+d.email)}),a.$on("auth:registration-email-error",function(b,d){showAlert(a,c,"Failure","Registration failure: "+d.errors[0])}),a.$on("auth:email-confirmation-success",function(a,b){return c({title:"Success!",html:!0,content:"<div id='alert-email-confirmation-success'>Welcome "+b.email+". Your account has been successfully created.</div>"})}),a.$on("auth:email-confirmation-error",function(a,b){return c({title:"Error!",html:!0,content:"<div id='alert-email-confirmation-error'>Unable to confirm your account. Request a password reset to verify your identity.</div>"})}),a.$on("auth:password-reset-confirm-success",function(){return c.open({templateUrl:"views/user_registrations/password-reset-modal.html",controller:"UserRegistrationsCtrl"})})}]),angular.module("timeTrackerApp.controllers",["timeTrackerApp.services"]).controller("MainCtrl",["$scope","TimeRecord",function(a,b){a.selectRecord=function(b){a.selectedRecord=angular.copy(b)},a.updateRecord=function(c){a.selectedRecord.$update(function(){a.errors=null,c&&(a.timeRecords=b.query()),$("#recordModal").modal("hide"),$("#descModal").modal("hide")},function(b){a.errors=b.data})},a.timeRecords=b.query({q:a.filter_time}),a.current_time_record=b.current_record(),a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.clear=function(){a.filter_time=null},a.$watch("filter_time",function(){a.timeRecords=b.query({q:a.filter_time})}),a.checkin=function(){var c=new b({start_time:new Date});c.$save(function(){a.timeRecords=b.query(),a.current_time_record=c})},a.checkout=function(){a.current_time_record.end_time=new Date,a.current_time_record.$update(function(){a.timeRecords=b.query(),a.current_time_record=null})}}]),angular.module("timeTrackerApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("timeTrackerApp").controller("UserSessionsCtrl",["$scope",function(a){a.$on("auth:login-error",function(b,c){a.error=c.errors})}]),angular.module("timeTrackerApp").controller("UserRegistrationsCtrl",["$scope","$location","$auth",function(a,b,c){a.$on("auth:registration-email-error",function(b,c){a.error=c.errors}),a.handleRegBtnClick=function(){c.submitRegistration(a.registrationForm).then(function(){c.submitRegistration({email:a.registrationForm.email,password:a.registrationForm.password})})},a.handleResetBtnClick=function(){c.requestPasswordReset(a.passwordResetForm).then(function(){a.notice="Password reset request was sent to your email"})}}]);